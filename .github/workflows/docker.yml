name: Build and Push Docker Image

on:
  push:
    branches: [ main ]
  workflow_dispatch:  # –ü–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –≤—Ä—É—á–Ω—É—é

jobs:
  build:
    runs-on: ubuntu-latest
    
    steps:
    - name: üì• –ó–∞–±—Ä–∞—Ç—å –∫–æ–¥
      uses: actions/checkout@v4
    
    - name: üîß –°–æ–±—Ä–∞—Ç—å Docker-–æ–±—Ä–∞–∑
      run: |
        docker build -t rahim004/joomla-project:latest .
    
    - name: üîê –í–æ–π—Ç–∏ –≤ Docker Hub
      uses: docker/login-action@v2
      with:
        username: ${{ secrets.DOCKERHUB_USERNAME }}
        password: ${{ secrets.DOCKERHUB_TOKEN }}
    
    - name: üöÄ –ó–∞–≥—Ä—É–∑–∏—Ç—å –æ–±—Ä–∞–∑ –Ω–∞ Docker Hub
      run: |
        docker push –≤–∞—à_–ª–æ–≥–∏–Ω/joomla-project:latest
    
    - name: ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∑–∞–≥—Ä—É–∑–∏–ª–æ—Å—å
      run: |
        echo "–û–±—Ä–∞–∑ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω –Ω–∞ Docker Hub!"
        echo "–°—Å—ã–ª–∫–∞: https://hub.docker.com/r/–≤–∞—à_–ª–æ–≥–∏–Ω/joomla-project"
